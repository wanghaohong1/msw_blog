(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{332:function(e,v,_){"use strict";_.r(v);var t=_(4),s=Object(t.a)({},(function(){var e=this,v=e._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[v("h1",{attrs:{id:"常用工具命令"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#常用工具命令"}},[e._v("#")]),e._v(" 常用工具命令")]),e._v(" "),v("blockquote",[v("p",[e._v("快速复用排障常用命令，建议结合脚本仓库维护。")])]),e._v(" "),v("h2",{attrs:{id:"操作系统"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#操作系统"}},[e._v("#")]),e._v(" 操作系统")]),e._v(" "),v("ul",[v("li",[e._v("查看进程资源："),v("code",[e._v("top -Hp <pid>")]),e._v("、"),v("code",[e._v("pidstat -p <pid> 1")])]),e._v(" "),v("li",[e._v("网络连接："),v("code",[e._v("ss -ltnp")]),e._v("、"),v("code",[e._v("telnet host port")]),e._v("、"),v("code",[e._v("curl -Iv")])]),e._v(" "),v("li",[e._v("磁盘空间："),v("code",[e._v("df -h")]),e._v("、"),v("code",[e._v("du -sh * | sort -h")])]),e._v(" "),v("li",[e._v("文件监控："),v("code",[e._v("tail -f app.log")]),e._v("、"),v("code",[e._v("multitail")]),e._v("、"),v("code",[e._v('grep -R "keyword"')])])]),e._v(" "),v("h2",{attrs:{id:"jvm-应用"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#jvm-应用"}},[e._v("#")]),e._v(" JVM 应用")]),e._v(" "),v("ul",[v("li",[e._v("线程堆栈："),v("code",[e._v("jstack -l <pid>")])]),e._v(" "),v("li",[e._v("堆内存快照："),v("code",[e._v("jmap -dump:format=b,file=heap.hprof <pid>")])]),e._v(" "),v("li",[e._v("实时监控："),v("code",[e._v("jstat -gcutil <pid> 1000")]),e._v("、"),v("code",[e._v("arthas")]),e._v(" ("),v("code",[e._v("dashboard")]),e._v(", "),v("code",[e._v("thread")]),e._v(", "),v("code",[e._v("trace")]),e._v(")")]),e._v(" "),v("li",[e._v("在线修改日志级别："),v("code",[e._v("arthas logger --name ROOT --level debug")])])]),e._v(" "),v("h2",{attrs:{id:"数据库-mysql"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#数据库-mysql"}},[e._v("#")]),e._v(" 数据库（MySQL）")]),e._v(" "),v("ul",[v("li",[e._v("连接状态："),v("code",[e._v("show processlist;")])]),e._v(" "),v("li",[e._v("慢查询："),v("code",[e._v("show variables like 'slow_query%';")]),e._v("、"),v("code",[e._v("show global status like 'Slow_queries';")])]),e._v(" "),v("li",[e._v("锁等待："),v("code",[e._v("show engine innodb status\\G")])]),e._v(" "),v("li",[e._v("备份恢复："),v("code",[e._v("mysqldump -h host -u user -p db table > backup.sql")])])]),e._v(" "),v("h2",{attrs:{id:"redis"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#redis"}},[e._v("#")]),e._v(" Redis")]),e._v(" "),v("ul",[v("li",[e._v("键统计："),v("code",[e._v("info keyspace")]),e._v("、"),v("code",[e._v("dbsize")])]),e._v(" "),v("li",[e._v("慢查询："),v("code",[e._v("slowlog get")]),e._v("、"),v("code",[e._v("latency latest")])]),e._v(" "),v("li",[e._v("主从状态："),v("code",[e._v("info replication")])]),e._v(" "),v("li",[e._v("集群检查："),v("code",[e._v("redis-cli -c cluster nodes")])])]),e._v(" "),v("h2",{attrs:{id:"kafka"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#kafka"}},[e._v("#")]),e._v(" Kafka")]),e._v(" "),v("ul",[v("li",[e._v("消费积压："),v("code",[e._v("kafka-consumer-groups.sh --describe --group xxx")])]),e._v(" "),v("li",[e._v("Topic 列表："),v("code",[e._v("kafka-topics.sh --list")])]),e._v(" "),v("li",[e._v("查看分区偏移："),v("code",[e._v("kafka-run-class kafka.tools.GetOffsetShell --topic xxx --time -1")])]),e._v(" "),v("li",[e._v("发送测试消息："),v("code",[e._v("kafka-console-producer.sh --topic xxx --broker-list host:9092")])])]),e._v(" "),v("h2",{attrs:{id:"kubernetes"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#kubernetes"}},[e._v("#")]),e._v(" Kubernetes")]),e._v(" "),v("ul",[v("li",[e._v("查看 Pod 状态："),v("code",[e._v("kubectl get pods -n ns --watch")])]),e._v(" "),v("li",[e._v("日志追踪："),v("code",[e._v("kubectl logs pod -n ns --tail=200 -f")])]),e._v(" "),v("li",[e._v("进入容器："),v("code",[e._v("kubectl exec -it pod -n ns -- bash")])]),e._v(" "),v("li",[e._v("回滚部署："),v("code",[e._v("kubectl rollout undo deployment/<name> -n ns")])])]),e._v(" "),v("blockquote",[v("p",[e._v("建议将以上命令整理为脚本或别名，并配合权限控制、审计记录使用。***")])])])}),[],!1,null,null,null);v.default=s.exports}}]);