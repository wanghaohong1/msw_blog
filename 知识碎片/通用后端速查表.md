# 通用后端速查表

## 常用 HTTP 状态码

| 状态码 | 说明 | 典型场景 |
| --- | --- | --- |
| 200 | OK | 成功返回请求结果 |
| 201 | Created | 创建资源成功，返回 Location |
| 204 | No Content | 删除成功或无需返回内容 |
| 400 | Bad Request | 参数错误、校验失败 |
| 401 | Unauthorized | 未认证或 token 失效 |
| 403 | Forbidden | 权限不足 |
| 404 | Not Found | 资源不存在 |
| 429 | Too Many Requests | 触发限流 |
| 500 | Internal Server Error | 服务端异常 |
| 502/503 | Bad Gateway/Service Unavailable | 依赖服务异常或暂停 |

## 常用 SQL 诊断命令

- `show processlist;` 查看当前连接与耗时 SQL。
- `explain analyze <sql>;` 获取真实执行计划与耗时。
- `show index from table_name;` 检查索引情况。
- `show engine innodb status\G;` 分析锁等待、事务情况。

## JVM 调试速记

- 查看 JVM 参数：`jcmd <pid> VM.flags`。
- 导出线程堆栈：`jstack -l <pid>`。
- 查看内存直方图：`jmap -histo <pid>`。
- 在线排查工具：`arthas`（`thread`, `jad`, `watch`, `monitor`）。

## Redis 运维常用

- 查看实时命令：`monitor`（注意生产慎用）。
- 查看 key 过期时间：`ttl key`。
- 批量删除：`scan 0 match pattern count 100` + `del key`。
- 查看内存：`info memory`、`memory usage key`。

## 线上排障提问模版

```
1. 现场情况：错误信息、发生时间、影响范围。
2. 最近变更：列出发布、配置、扩缩容等操作。
3. 指标表现：CPU、内存、QPS、错误率数据或截图。
4. 排查步骤：已执行命令、观察结果与结论。
5. 诉求计划：期望协助、是否具备回滚或临时止血方案。
```

